"use strict";(globalThis.webpackChunkai_book_rag_chatbot=globalThis.webpackChunkai_book_rag_chatbot||[]).push([[634],{7773:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var n=s(6540),a=s(4164),i=s(8774),r=s(4586),o=s(1656),c=s(8305),l=s(4848);class h extends Error{constructor(e,t,s=null){super(e),this.name="ApiError",this.status=t,this.detail=s}}const d=async e=>{let t={detail:`HTTP error! status: ${e.status}`};try{t=await e.json()}catch(s){t.detail=`HTTP error! status: ${e.status}`}throw new h(t.detail,e.status,t)},u=e=>{const t=[];return e&&0!==e.trim().length||t.push("Input cannot be empty"),e.length>1e4&&t.push("Input is too long (maximum 10,000 characters)"),t},m=e=>{const t=[];e&&"string"==typeof e||t.push("Conversation ID is required and must be a string");return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)||t.push("Invalid conversation ID format"),t},p=(e,t,s)=>{console.error(`[${e}] ${t}:`,{message:s.message,name:s.name,stack:s.stack,...s.status&&{status:s.status},...s.detail&&{detail:s.detail}})};n.Component;const w=new class{constructor(e="http://localhost:8000"){this.apiUrl=e}async createConversation({userId:e=null,title:t=null}={}){try{if(t&&t.length>200)throw new Error("Title is too long (maximum 200 characters)");const s=await fetch(`${this.apiUrl}/api/v1/chat/conversations/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,title:t})});return s.ok?await s.json():await d(s)}catch(s){throw p("ApiClient","createConversation",s),s}}async getConversation(e){try{const t=m(e);if(t.length>0)throw new Error(`Invalid conversation ID: ${t.join(", ")}`);const s=await fetch(`${this.apiUrl}/api/v1/chat/conversations/${e}`);return s.ok?await s.json():await d(s)}catch(t){throw p("ApiClient","getConversation",t),t}}async getConversationsByUser(e,t=0,s=20){try{if(!e||"string"!=typeof e)throw new Error("User ID is required and must be a string");if("number"!=typeof t||t<0)throw new Error("Skip must be a non-negative number");if("number"!=typeof s||s<1||s>100)throw new Error("Limit must be a number between 1 and 100");const n=await fetch(`${this.apiUrl}/api/v1/chat/conversations/?user_id=${encodeURIComponent(e)}&skip=${t}&limit=${s}`);return n.ok?await n.json():await d(n)}catch(n){throw p("ApiClient","getConversationsByUser",n),n}}async processQuery(e,t,s=null,n=5){try{const a=[...m(e),...u(t)];if(a.length>0)throw new Error(`Validation failed: ${a.join(", ")}`);if("number"!=typeof n||n<1||n>20)throw new Error("Context window must be a number between 1 and 20");if(s&&s.length>5e3)throw new Error("Selected text is too long (maximum 5,000 characters)");const i=await fetch(`${this.apiUrl}/api/v1/chat/conversations/${e}/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query_text:t,selected_text:s,context_window:n})});return i.ok?await i.json():await d(i)}catch(a){throw p("ApiClient","processQuery",a),a}}async getChatHistory(e,t=50){try{const s=m(e);if(s.length>0)throw new Error(`Invalid conversation ID: ${s.join(", ")}`);if("number"!=typeof t||t<1||t>200)throw new Error("Limit must be a number between 1 and 200");const n=await fetch(`${this.apiUrl}/api/v1/chat/conversations/${e}/history?limit=${t}`);return n.ok?await n.json():await d(n)}catch(s){throw p("ApiClient","getChatHistory",s),s}}async updateConversationTitle(e,t){try{const s=[...m(e),...u(t)];if(s.length>0)throw new Error(`Validation failed: ${s.join(", ")}`);if(t.length>200)throw new Error("Title is too long (maximum 200 characters)");const n=await fetch(`${this.apiUrl}/api/v1/chat/conversations/${e}/title`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t})});return n.ok?await n.json():await d(n)}catch(s){throw p("ApiClient","updateConversationTitle",s),s}}async deleteConversation(e){try{const t=m(e);if(t.length>0)throw new Error(`Invalid conversation ID: ${t.join(", ")}`);const s=await fetch(`${this.apiUrl}/api/v1/chat/conversations/${e}`,{method:"DELETE"});return s.ok?await s.json():await d(s)}catch(t){throw p("ApiClient","deleteConversation",t),t}}async getContentById(e){try{const t=(e=>{const t=[];return e&&"string"==typeof e||t.push("Content ID is required and must be a string"),/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)||t.push("Invalid content ID format"),t})(e);if(t.length>0)throw new Error(`Invalid content ID: ${t.join(", ")}`);const s=await fetch(`${this.apiUrl}/api/v1/content/${e}`);return s.ok?await s.json():await d(s)}catch(t){throw p("ApiClient","getContentById",t),t}}async getContentBySectionPath(e){try{if(!e||"string"!=typeof e)throw new Error("Section path is required and must be a string");if(e.length>200)throw new Error("Section path is too long (maximum 200 characters)");const t=await fetch(`${this.apiUrl}/api/v1/content/path/${encodeURIComponent(e)}`);return t.ok?await t.json():await d(t)}catch(t){throw p("ApiClient","getContentBySectionPath",t),t}}async searchContent(e,t=null){try{const s=((e,t=null)=>{const s=[];return e&&0!==e.trim().length||s.push("Query cannot be empty"),e.length>1e3&&s.push("Query is too long (maximum 1,000 characters)"),null!==t&&("number"!=typeof t||t<1||t>1e3)&&s.push("Limit must be a number between 1 and 1000"),s})(e);if(s.length>0)throw new Error(`Validation failed: ${s.join(", ")}`);if(t&&"string"!=typeof t)throw new Error("Module ID must be a string if provided");let n=`${this.apiUrl}/api/v1/content/search/?query=${encodeURIComponent(e)}`;t&&(n+=`&module_id=${encodeURIComponent(t)}`);const a=await fetch(n);return a.ok?await a.json():await d(a)}catch(s){throw p("ApiClient","searchContent",s),s}}},g=({apiUrl:e="http://localhost:8000"})=>{const[t,s]=(0,n.useState)([]),[a,i]=(0,n.useState)(""),[r,o]=(0,n.useState)(!1),[h,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),{selectedText:p,clearSelection:g}=(0,c.C)();(0,n.useEffect)(()=>{w&&w.setBaseUrl&&w.setBaseUrl(e)},[e]);const x=(0,n.useRef)(null),f=(0,n.useRef)(null);(0,n.useEffect)(()=>{x.current?.scrollIntoView({behavior:"smooth"})},[t]);const j=async()=>{if(!a.trim()||r)return;let e=h;if(!e&&(e=await(async()=>{try{const e=await w.createConversation();return d(e.id),e.id}catch(e){return console.error("Error creating conversation:",e),m("Failed to create conversation. Please try again."),null}})(),!e))return;const t={id:Date.now(),text:a,sender:"user",timestamp:(new Date).toISOString(),selectedText:p||null};s(e=>[...e,t]),i(""),o(!0),m(null);try{const t=await w.processQuery(e,a,p||null),n={id:t.id,text:t.response_text,sender:"ai",timestamp:t.timestamp,sources:t.sources||[]};s(e=>[...e,n])}catch(n){console.error("Error sending message:",n),m(`Failed to get response: ${n.message}`);const e={id:Date.now(),text:`Sorry, I encountered an error: ${n.message}`,sender:"ai",timestamp:(new Date).toISOString(),isError:!0};s(t=>[...t,e])}finally{o(!1),g()}};return(0,l.jsxs)("div",{className:"chat-interface",children:[(0,l.jsxs)("div",{className:"chat-header",children:[(0,l.jsx)("h3",{children:"AI Assistant for Humanoid Robotics"}),(0,l.jsx)("button",{className:"clear-chat-btn",onClick:async()=>{if(h)try{await w.deleteConversation(h)}catch(e){console.error("Error deleting conversation:",e)}s([]),d(null),m(null)},disabled:0===t.length,title:"Clear chat history",children:"Clear Chat"})]}),u&&(0,l.jsx)("div",{className:"chat-error",children:u}),p&&(0,l.jsxs)("div",{className:"selected-text-preview",children:[(0,l.jsx)("strong",{children:"Selected text:"}),' "',p.substring(0,100),p.length>100?"...":"",'"']}),(0,l.jsxs)("div",{className:"chat-messages",children:[0===t.length?(0,l.jsxs)("div",{className:"chat-welcome",children:[(0,l.jsx)("p",{children:"Hello! I'm your AI assistant for the Humanoid Robotics book."}),(0,l.jsx)("p",{children:"Ask me questions about ROS 2, Gazebo/Unity simulation, NVIDIA Isaac, or Vision-Language-Action systems."}),(0,l.jsx)("p",{children:"You can also select text on the page and ask questions about it!"})]}):t.map(e=>(0,l.jsxs)("div",{className:"chat-message "+("user"===e.sender?"user-message":"ai-message"),children:[(0,l.jsxs)("div",{className:"message-header",children:[(0,l.jsx)("span",{className:"sender-name",children:"user"===e.sender?"You":"AI Assistant"}),(0,l.jsx)("span",{className:"timestamp",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,l.jsxs)("div",{className:"message-content",children:[e.text,"ai"===e.sender&&e.sources&&e.sources.length>0&&(0,l.jsxs)("div",{className:"sources",children:[(0,l.jsx)("strong",{children:"Sources:"}),(0,l.jsx)("ul",{children:e.sources.map((e,t)=>(0,l.jsxs)("li",{children:[(0,l.jsx)("a",{href:`/docs/${e.section_path}`,target:"_blank",rel:"noopener noreferrer",children:e.title}),e.confidence&&(0,l.jsxs)("span",{className:"confidence",children:[" (Confidence: ",(100*e.confidence).toFixed(1),"%)"]})]},t))})]}),e.isError&&(0,l.jsx)("div",{className:"error-indicator",children:"\u26a0\ufe0f An error occurred processing this response"})]})]},e.id)),r&&(0,l.jsxs)("div",{className:"chat-message ai-message",children:[(0,l.jsx)("div",{className:"message-header",children:(0,l.jsx)("span",{className:"sender-name",children:"AI Assistant"})}),(0,l.jsx)("div",{className:"message-content",children:(0,l.jsxs)("div",{className:"typing-indicator",children:[(0,l.jsx)("span",{}),(0,l.jsx)("span",{}),(0,l.jsx)("span",{})]})})]}),(0,l.jsx)("div",{ref:x})]}),(0,l.jsxs)("form",{className:"chat-input-form",onSubmit:e=>{e.preventDefault(),j()},children:[(0,l.jsx)("textarea",{ref:f,value:a,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),j())},placeholder:"Ask a question about humanoid robotics...",rows:"3",disabled:r}),(0,l.jsx)("button",{type:"submit",disabled:!a.trim()||r,className:"send-button",children:r?"Sending...":"Send"})]})]})},x={heroBanner:"heroBanner_qdFl",buttons:"buttons_AeoN",modulesSection:"modulesSection_u0Te",chatSection:"chatSection_dAmW"};function f(){const{siteConfig:e}=(0,r.A)();return(0,l.jsx)("header",{className:(0,a.A)("hero hero--primary",x.heroBanner),children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("h1",{className:"hero__title",children:e.title}),(0,l.jsx)("p",{className:"hero__subtitle",children:e.tagline}),(0,l.jsx)("div",{className:x.buttons,children:(0,l.jsx)(i.A,{className:"button button--secondary button--lg",to:"/docs/intro",children:"Read the Book"})})]})})}function j(){const{siteConfig:e}=(0,r.A)();return(0,l.jsxs)(o.A,{title:`Hello from ${e.title}`,description:"AI-Native Book on Physical AI & Humanoid Robotics with integrated RAG Chatbot",children:[(0,l.jsx)(f,{}),(0,l.jsxs)("main",{children:[(0,l.jsx)("section",{className:x.modulesSection,children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("h2",{children:"Book Modules"}),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col col--3",children:(0,l.jsxs)("div",{className:"text--center padding-horiz--md",children:[(0,l.jsx)("h3",{children:"Module 1: ROS 2"}),(0,l.jsx)("p",{children:"Learn about Robot Operating System 2 for humanoid robotics applications"})]})}),(0,l.jsx)("div",{className:"col col--3",children:(0,l.jsxs)("div",{className:"text--center padding-horiz--md",children:[(0,l.jsx)("h3",{children:"Module 2: Simulation"}),(0,l.jsx)("p",{children:"Gazebo and Unity for humanoid robotics simulation"})]})}),(0,l.jsx)("div",{className:"col col--3",children:(0,l.jsxs)("div",{className:"text--center padding-horiz--md",children:[(0,l.jsx)("h3",{children:"Module 3: NVIDIA Isaac"}),(0,l.jsx)("p",{children:"Advanced AI for humanoid robotics using NVIDIA Isaac platform"})]})}),(0,l.jsx)("div",{className:"col col--3",children:(0,l.jsxs)("div",{className:"text--center padding-horiz--md",children:[(0,l.jsx)("h3",{children:"Module 4: VLA"}),(0,l.jsx)("p",{children:"Vision-Language-Action systems for advanced humanoid capabilities"})]})})]})]})}),(0,l.jsx)("section",{className:x.chatSection,children:(0,l.jsxs)("div",{className:"container padding-vert--lg",children:[(0,l.jsx)("h2",{children:"AI-Powered Chatbot"}),(0,l.jsx)("p",{children:"Ask questions about the book content using our AI-powered chatbot with Retrieval-Augmented Generation (RAG)."}),(0,l.jsx)("div",{style:{height:"500px",border:"1px solid #ccc",borderRadius:"8px",overflow:"hidden"},children:(0,l.jsx)(g,{apiUrl:"http://localhost:8000"})})]})})]})]})}}}]);